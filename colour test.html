<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- 强制禁止用户缩放，适配移动端 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>20题色彩性格测试 - BunnyMind</title>
    <!-- 引入 Tailwind CSS (外观样式) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 额外的动画样式 */
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 3s infinite ease-in-out;
        }
        /* 防止手机点击出现高亮背景 */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body {
            /* 禁用iOS弹性滚动，防止背景露白 */
            overscroll-behavior-y: none;
        }
    </style>
</head>
<body class="bg-[#FFF0F5] text-slate-800 font-sans selection:bg-pink-200 overflow-x-hidden min-h-screen">

    <!-- 顶部导航 -->
    <header class="fixed top-0 w-full bg-white/80 backdrop-blur-md shadow-sm z-20 border-b border-pink-100 touch-manipulation">
        <div class="max-w-4xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-gradient-to-br from-pink-400 to-orange-400 rounded-xl flex items-center justify-center text-white font-bold shadow-md transform -rotate-6">
                    <!-- Smile Icon SVG -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>
                </div>
                <span class="font-bold text-xl tracking-tight text-slate-700">BunnyMind</span>
            </div>
            <div class="text-xs font-bold text-pink-400 bg-pink-50 px-3 py-1 rounded-full">20题深度版</div>
        </div>
    </header>

    <!-- 主内容区域 -->
    <main id="app" class="pt-24 pb-12 px-4 max-w-4xl mx-auto min-h-screen flex flex-col justify-center">
        <!-- 内容将通过 JavaScript 动态注入 -->
    </main>

    <!-- 核心逻辑脚本 -->
    <script>
        // --- 数据配置 ---
        const colorOptions = [
            { id: 'red', color: '#FF5252', name: '热血红', trait: '行动派', keywords: ['热情', '直接', '爆发力'] },
            { id: 'orange', color: '#FF9F43', name: '元气橙', trait: '社交家', keywords: ['开朗', '有趣', '依赖'] },
            { id: 'yellow', color: '#FFD32A', name: '闪光黄', trait: '乐天派', keywords: ['好奇', '单纯', '创意'] },
            { id: 'green', color: '#2ECC71', name: '治愈绿', trait: '和平者', keywords: ['稳重', '包容', '安全感'] },
            { id: 'cyan', color: '#00D2D3', name: '清醒青', trait: '独立者', keywords: ['冷静', '独特', '距离感'] },
            { id: 'blue', color: '#2e86de', name: '深邃蓝', trait: '思考者', keywords: ['逻辑', '完美', '忧郁'] },
            { id: 'purple', color: '#8e44ad', name: '幻想紫', trait: '艺术家', keywords: ['神秘', '直觉', '感性'] },
            { id: 'pink', color: '#ff9ff3', name: '恋爱粉', trait: '浪漫派', keywords: ['温柔', '细腻', '被爱'] },
            { id: 'brown', color: '#834c32', name: '大地棕', trait: '守护者', keywords: ['踏实', '固执', '可靠'] },
            { id: 'black', color: '#2d3436', name: '绝对黑', trait: '独行侠', keywords: ['意志', '封闭', '权威'] },
            { id: 'white', color: '#dfe6e9', name: '纯净白', trait: '理想家', keywords: ['完美', '单纯', '洁癖'] },
            { id: 'navy', color: '#2c3e50', name: '沉稳靛', trait: '决策者', keywords: ['深沉', '严肃', '掌控'] },
        ];

        const questions = [
            { id: 1, title: "初印象", description: "凭直觉，你最喜欢哪只兔子？" },
            { id: 2, title: "能量源", description: "当你感到疲惫时，什么颜色的光能治愈你？" },
            { id: 3, title: "社交面具", description: "在不熟悉的聚会上，你倾向于穿什么颜色的衣服？" },
            { id: 4, title: "童年回忆", description: "回想你的童年，整体色调是什么？" },
            { id: 5, title: "理想假期", description: "你想去一个什么主色调的地方度假？" },
            { id: 6, title: "拒绝", description: "你绝对不会把卧室刷成什么颜色？(选择最排斥的)" },
            { id: 7, title: "爱情", description: "你认为初恋的味道是什么颜色的？" },
            { id: 8, title: "职场", description: "当你专注工作时，你的精神状态像什么颜色？" },
            { id: 9, title: "压力", description: "当你焦虑时，眼前似乎笼罩着什么颜色？" },
            { id: 10, title: "快乐", description: "听到好消息时，你心里的烟花是什么颜色的？" },
            { id: 11, title: "礼物", description: "收到礼物盒子，你希望包装纸是什么颜色？" },
            { id: 12, title: "魔法", description: "如果你会魔法，你的魔法光效是什么颜色？" },
            { id: 13, title: "周末", description: "一个完美的懒觉早晨是什么颜色的？" },
            { id: 14, title: "朋友", description: "你最好的朋友给你的感觉是什么颜色？" },
            { id: 15, title: "渴望", description: "你觉得现在的自己最缺乏什么颜色？" },
            { id: 16, title: "悲伤", description: "当你想一个人静静时，你希望周围是什么颜色？" },
            { id: 17, title: "未来", description: "想象五年后的自己，散发着什么颜色的气场？" },
            { id: 18, title: "食物", description: "看着最有食欲的颜色是？" },
            { id: 19, title: "宠物", description: "如果养一只外星宠物，你希望它是？" },
            { id: 20, title: "本质", description: "最后一次，深呼吸，哪种颜色代表了真实的你？" },
        ];

        // --- 状态管理 ---
        let state = {
            scene: 'welcome', // welcome, question, analyzing, result
            qIndex: 0,
            answers: [],
            progress: 0
        };

        // --- 组件渲染函数 (返回 HTML 字符串) ---

        // 兔子 SVG 生成器
        function getBunnySvg(color, isSelected = false) {
            const classes = isSelected 
                ? 'scale-110 drop-shadow-xl' 
                : 'hover:scale-105 hover:drop-shadow-md';
            
            return `
            <svg viewBox="0 0 100 120" class="w-full h-full transition-all duration-300 drop-shadow-sm ${classes}" style="pointer-events: none;">
                <path d="M30 40 Q20 5 35 5 Q50 5 45 40" fill="${color}" stroke="white" stroke-width="3" />
                <path d="M70 40 Q80 5 65 5 Q50 5 55 40" fill="${color}" stroke="white" stroke-width="3" />
                <path d="M20 40 Q10 100 50 110 Q90 100 80 40 Q80 20 50 20 Q20 20 20 40" fill="${color}" stroke="white" stroke-width="3" />
                <path d="M32 35 Q28 15 35 15 Q42 15 38 35" fill="rgba(255,255,255,0.3)" />
                <path d="M68 35 Q72 15 65 15 Q58 15 62 35" fill="rgba(255,255,255,0.3)" />
                <circle cx="35" cy="55" r="3" fill="rgba(0,0,0,0.6)" />
                <circle cx="65" cy="55" r="3" fill="rgba(0,0,0,0.6)" />
                <circle cx="25" cy="65" r="4" fill="rgba(255,255,255,0.4)" />
                <circle cx="75" cy="65" r="4" fill="rgba(255,255,255,0.4)" />
                <path d="M45 65 Q50 70 55 65" fill="none" stroke="rgba(0,0,0,0.6)" stroke-width="2" stroke-linecap="round" />
                <ellipse cx="50" cy="85" rx="15" ry="10" fill="rgba(255,255,255,0.2)" />
            </svg>
            `;
        }

        // 渲染主逻辑
        function render() {
            const app = document.getElementById('app');
            app.innerHTML = ''; // 清空

            if (state.scene === 'welcome') {
                renderWelcome(app);
            } else if (state.scene === 'question') {
                renderQuestion(app);
            } else if (state.scene === 'analyzing') {
                renderAnalyzing(app);
            } else if (state.scene === 'result') {
                renderResult(app);
            }
        }

        // 1. 欢迎界面
        function renderWelcome(container) {
            let bunniesHTML = colorOptions.slice(0, 5).map((c, i) => 
                `<div class="w-12 md:w-16 animate-bounce" style="animation-delay: ${i * 0.1}s">
                    ${getBunnySvg(c.color)}
                </div>`
            ).join('');

            container.innerHTML = `
                <div class="text-center space-y-8 animate-[fadeIn_0.7s_ease-out] flex flex-col items-center">
                    <div class="relative">
                        <div class="absolute inset-0 bg-pink-300 blur-3xl opacity-30 rounded-full animate-pulse"></div>
                        <h1 class="relative text-4xl md:text-6xl font-black text-slate-800 pb-2 tracking-tight">
                            <span class="text-pink-500">超准!</span> 20题色彩性格测试
                        </h1>
                    </div>
                    <p class="text-lg text-slate-500 max-w-md mx-auto">
                        这是一个在韩国超火的直觉测试。通过20次快速的直觉选择，我们将描绘出你完整的内心世界画像。
                    </p>
                    <div class="flex justify-center gap-2 md:gap-4 my-8 perspective-500">
                        ${bunniesHTML}
                    </div>
                    <button onclick="startGame()" class="group relative inline-flex items-center justify-center px-10 py-5 font-bold text-white transition-all duration-200 bg-slate-800 rounded-2xl hover:bg-slate-700 hover:scale-105 hover:shadow-xl shadow-lg shadow-pink-200 touch-manipulation">
                        <span>开始测验 (20题)</span>
                        <svg class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                    </button>
                    <p class="text-xs text-slate-400">已有 12,392 人参与测试</p>
                </div>
            `;
        }

        // 2. 答题界面
        function renderQuestion(container) {
            const q = questions[state.qIndex];
            const progress = ((state.qIndex) / questions.length) * 100;

            let gridHTML = colorOptions.map(color => `
                <button onclick="handleAnswer('${color.id}')" class="group relative flex flex-col items-center justify-center p-2 rounded-2xl transition-all duration-200 hover:bg-white/50 focus:outline-none touch-manipulation">
                    <div class="w-20 h-24 md:w-24 md:h-28 transition-transform duration-200 group-hover:scale-110 group-active:scale-95 pointer-events-none">
                        ${getBunnySvg(color.color)}
                    </div>
                    <span class="mt-2 text-xs font-bold text-slate-400 group-hover:text-slate-600 transition-colors opacity-0 group-hover:opacity-100">
                        ${color.name}
                    </span>
                </button>
            `).join('');

            container.innerHTML = `
                <div class="max-w-3xl mx-auto w-full animate-[zoomIn_0.3s_ease-out]">
                    <div class="mb-6 text-center">
                        <div class="flex justify-center mb-4">
                            <div class="w-full max-w-xs bg-gray-200 rounded-full h-2.5">
                                <div class="bg-pink-500 h-2.5 rounded-full transition-all duration-300" style="width: ${progress}%"></div>
                            </div>
                        </div>
                        <span class="inline-block px-3 py-1 bg-white border border-pink-100 text-pink-500 rounded-lg text-sm font-bold shadow-sm mb-4">
                            Q${state.qIndex + 1} / ${questions.length}
                        </span>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-800 mb-2">${q.title}</h2>
                        <p class="text-slate-500 font-medium">${q.description}</p>
                    </div>
                    <div class="grid grid-cols-3 md:grid-cols-4 gap-3 md:gap-6 px-2">
                        ${gridHTML}
                    </div>
                </div>
            `;
        }

        // 3. 分析界面
        function renderAnalyzing(container) {
            container.innerHTML = `
                <div class="text-center w-full max-w-md mx-auto bg-white p-10 rounded-3xl shadow-xl border border-pink-100">
                    <div class="mb-8 relative flex justify-center">
                        <div class="w-24 h-24 absolute border-4 border-pink-100 rounded-full animate-ping"></div>
                        <div class="w-24 h-24 border-4 border-t-pink-500 border-r-pink-500 border-b-transparent border-l-transparent rounded-full animate-spin"></div>
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                            <!-- Brain Icon -->
                            <svg class="text-pink-500 w-10 h-10" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/></svg>
                        </div>
                    </div>
                    <h2 class="text-xl font-bold text-slate-800 mb-2">正在绘制你的灵魂画像...</h2>
                    <p class="text-slate-400 text-sm mb-6">整合20个维度的色彩数据</p>
                    <div class="h-3 w-full bg-slate-100 rounded-full overflow-hidden">
                        <div id="analyze-bar" class="h-full bg-gradient-to-r from-pink-400 to-purple-500 transition-all duration-100 ease-linear" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 flex justify-between text-xs text-slate-400 font-mono">
                        <span>DATA PROCESSING</span>
                        <span id="analyze-text">0%</span>
                    </div>
                </div>
            `;
            
            // 启动进度条动画
            let p = 0;
            const interval = setInterval(() => {
                p += 1.5;
                if (p > 100) p = 100;
                document.getElementById('analyze-bar').style.width = p + '%';
                document.getElementById('analyze-text').innerText = Math.round(p) + '%';
                
                if (p >= 100) {
                    clearInterval(interval);
                    state.scene = 'result';
                    render();
                }
            }, 30);
        }

        // 4. 结果界面
        function renderResult(container) {
            const data = getAnalysisData();
            const mainBunnyColor = colorOptions.find(c => c.name === data.title.split('：')[1])?.color || '#333';

            const tagsHTML = data.tags.map(tag => 
                `<span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm font-bold">#${tag}</span>`
            ).join('');

            const sectionsHTML = data.sections.map(sec => `
                <div class="bg-slate-50 p-5 rounded-2xl border border-slate-100 hover:shadow-md transition-shadow">
                    <div class="flex items-center gap-3 mb-2">
                        ${sec.icon}
                        <h3 class="font-bold text-slate-700">${sec.title}</h3>
                    </div>
                    <p class="text-sm md:text-base text-slate-600 leading-relaxed text-justify">
                        ${sec.content}
                    </p>
                </div>
            `).join('');

            container.innerHTML = `
                <div class="animate-[slideInUp_0.7s_ease-out] max-w-2xl mx-auto w-full">
                    <div class="bg-white rounded-[2rem] shadow-xl overflow-hidden border border-slate-100 relative">
                        <!-- 装饰背景 -->
                        <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-pink-100 to-transparent rounded-bl-full opacity-50 -z-1"></div>
                        
                        <!-- 头部 -->
                        <div class="p-8 text-center relative z-10">
                            <div class="inline-block p-4 rounded-full bg-pink-50 mb-6 shadow-inner">
                                <div class="w-32 h-32 md:w-40 md:h-40 animate-bounce-slow">
                                    ${getBunnySvg(mainBunnyColor, true)}
                                </div>
                            </div>
                            <h2 class="text-3xl md:text-4xl font-black text-slate-800 mb-3 tracking-tight">${data.title}</h2>
                            <div class="flex flex-wrap justify-center gap-2 mb-6">
                                ${tagsHTML}
                            </div>
                        </div>

                        <!-- 详情卡片 -->
                        <div class="px-6 pb-8 md:px-10 md:pb-12 grid gap-4">
                            ${sectionsHTML}
                        </div>

                        <!-- 底部 -->
                        <div class="bg-slate-900 p-6 flex justify-between items-center text-white">
                            <div class="text-xs md:text-sm text-slate-400">
                                <p>BunnyMind © 2015</p>
                                <p>色彩心理学实验室</p>
                                <p class="mt-1 text-slate-500 text-[10px]">小红书-心灵栖息书原创 侵权必究</p>
                            </div>
                            <button onclick="startGame()" class="flex items-center gap-2 px-6 py-3 bg-pink-500 rounded-xl font-bold hover:bg-pink-400 transition-all shadow-lg hover:shadow-pink-500/30 touch-manipulation">
                                <!-- Refresh Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
                                <span>再测一次</span>
                            </button>
                        </div>
                    </div>
                    <div class="mt-8 text-center">
                        <p class="text-slate-400 text-sm">觉得准吗？截屏分享给朋友吧！</p>
                    </div>
                </div>
            `;
        }

        // --- 逻辑处理 ---
        function startGame() {
            state.scene = 'question';
            state.qIndex = 0;
            state.answers = [];
            render();
        }

        function handleAnswer(colorId) {
            const colorObj = colorOptions.find(c => c.id === colorId);
            state.answers.push({ ...colorObj, questionId: questions[state.qIndex].id });
            
            if (state.qIndex < questions.length - 1) {
                state.qIndex++;
                render();
            } else {
                state.scene = 'analyzing';
                render();
            }
        }

        function getAnalysisData() {
            // 统计频率
            const colorCounts = {};
            state.answers.forEach(a => {
                colorCounts[a.id] = (colorCounts[a.id] || 0) + 1;
            });
            const sortedColors = Object.keys(colorCounts).sort((a, b) => colorCounts[b] - colorCounts[a]);
            const primaryId = sortedColors[0];
            const secondaryId = sortedColors[1] || sortedColors[0];
            const primaryObj = colorOptions.find(c => c.id === primaryId);
            const secondaryObj = colorOptions.find(c => c.id === secondaryId);
            
            const stressColor = state.answers.find(a => a.questionId === 6) || primaryObj;
            const futureColor = state.answers.find(a => a.questionId === 17) || primaryObj;

            // 图标 SVG 字符串
            const starIcon = `<svg class="w-5 h-5 text-yellow-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>`;
            const ghostIcon = `<svg class="w-5 h-5 text-purple-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 10h.01"/><path d="M15 10h.01"/><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"/></svg>`;
            const shieldIcon = `<svg class="w-5 h-5 text-red-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`;
            const zapIcon = `<svg class="w-5 h-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`;

            return {
                title: `你的灵魂底色是：${primaryObj.name}`,
                tags: primaryObj.keywords,
                sections: [
                    {
                        icon: starIcon,
                        title: "核心人格",
                        content: `在20道潜意识测试中，${primaryObj.name}占据了主导地位。这说明你骨子里是一个${primaryObj.trait}。你拥有${primaryObj.keywords[0]}的天性，在人群中，你往往扮演着${primaryObj.keywords[2]}的角色。`
                    },
                    {
                        icon: ghostIcon,
                        title: "隐藏面具",
                        content: `除了主导性格，你的测试结果还频繁出现了${secondaryObj.name}。这代表了你的"第二人格"。虽然你外表看起来${primaryObj.keywords[0]}，但内心深处其实非常${secondaryObj.keywords[1]}，只有亲近的人才能看到这一面。`
                    },
                    {
                        icon: shieldIcon,
                        title: "压力防御",
                        content: `你在测试中极力回避${stressColor.name}，这通常意味着你目前正在潜意识里抵触"${stressColor.keywords[0]}"相关的状态。也许最近某些过于${stressColor.trait}的人际关系让你感到了疲惫。`
                    },
                    {
                        icon: zapIcon,
                        title: "未来进化",
                        content: `你将${futureColor.name}选为未来的气场色。这暗示了你潜意识里渴望成为一个更${futureColor.keywords[1]}的人。你的成长方向是从${primaryObj.trait}向${futureColor.trait}的融合与进化。`
                    }
                ]
            };
        }

        // 初始化
        render();

    </script>
</body>
</html>